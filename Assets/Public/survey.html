<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Find a pal</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- <link rel="stylesheet" type="text/css" href="../Etc/style.css"> -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
</head>

<body>
    <div class="card w-75">
        <div class="card-body2">
        
          <div class="container2">
			<div class="row">
				<div class="col s12 z-depth-5 mainpanel">
					<div id="mainpanel-content">
						<h1>Survey Questions</h1>
						<div class="divider"></div>
                        <br>
                        <h3>About You</h3>
                        
                        <br>

						<div class="input-field col s6">
							<h5>Name (Required)</h5>
							
							<input type="text" class="required" placeholder="Your Name Here" id="userName">
						</div>

                        <br>
						<div class="input-field col s6">
							<h5>Link to Photo Image (Required)</h5>
							
							<input type="text" class="required" placeholder="Photo Link Here" id="userPhoto">
						</div>

                        <br>
						
						<div class="input-field col s12">
							<h3>Question 1</h3>
							<h5>Your mind is always buzzing with unexplored ideas and plans.</h5>
							<select id="question1">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>
                        <br>
						<div class="input-field col s12">
							<h3>Question 2</h3>
							<h5>Generally speaking, you rely more on your experience than your imagination.</h5>
							<select id="question2">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>
                        <br>
						<div class="input-field col s12">
							<h3>Question 3</h3>
							<h5>You find it easy to stay relaxed and focused even when there is some pressure.</h5>
							<select id="question3">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>
                        <br>
						<div class="input-field col s12">
							<h3>Question 4</h3>
							<h5>You rarely do something just out of sheer curiosity.</h5>
							<select id="question4">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>
                        <br>
						<div class="input-field col s12">
							<h3>Question 5</h3>
							<h5>People can rarely upset you.</h5>
							<select id="question5">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>
                        <br>
						<div class="input-field col s12">
							<h3>Question 6</h3>
							<h5>It is often difficult for you to relate to other people’s feelings.</h5>
							<select id="question6">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>
                        <br>
						<div class="input-field col s12">
							<h3>Question 7</h3>
							<h5>In a discussion, truth should be more important than people’s sensitivities.</h5>
							<select id="question7">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>
                        <br>
						<div class="input-field col s12">
							<h3>Question 8</h3>
							<h5>You rarely get carried away by fantasies and ideas.</h5>
							<select id="question8">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>
                        <br>
						<div class="input-field col s12">
							<h3>Question 9</h3>
							<h5>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h5>
							<select id="question9">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>
                        <br>
						<div class="input-field col s12">
							<h3>Question 10</h3>
							<h5>You feel more energetic after spending time with a group of people.</h5>
							<select id="question10">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

                        <br>
                        <br>
						<div>
							<button class="btn waves-effect waves-light" type="submit" name="action" id="submitButton">Submit Responses</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</main>

	<div id="modal">
		<div class="modal-content">
			<h4> Your Closest Friend Match</h4>
			<div class="divider"></div>
			<h5 id="userMatch"></h5>
			<img id="userMatchImage" class="materialboxed" width="650" src="">
		</div>
		<div class="modal-footer">
			<a href="/survey" class="modal-action modal-close waves-effect waves-green btn-flat">Fill it Again yea?</a>
		</div>
	</div>
        <!-- </div>
      </div> -->
    
</body>

<script type= "text/javascript">


	//make sure all fields are field out 
	$("#submitButton").on("click", function() {
	  event.preventDefault();

			var validation = true

			function validate(){

				$(".required").each(function(){
					if(this.val === "")
					validation = false 
					
					
				
					
				})

				$(".input-field").each(function(){
					if(this.val === "")
					validation = false 

					
					
				})

				return validation

				

				
			}

			if (validate() == true) 

			{
          //create a variable to hold all user input information
				var newFriend = {
					name: $('#userName').val().trim(),
					picture: $('#userPhoto').val().trim(),
					scores: [
						$('#question1').val(),
						$('#question2').val(),
						$('#question3').val(),
						$('#question4').val(),
						$('#question5').val(),
						$('#question6').val(),
						$('#question7').val(),
						$('#question8').val(),
						$('#question9').val(),
						$('#question10').val(),
					]
			 }
			 
			 //grab current location 
			  var currentURL = window.location.origin;

			  $.ajax({
						type: "POST",
						url:currentURL+"/api/friends",
						data: newFriend,
						success: function(data){
							console.log(data)
							$("#userMatch").text(data.name);
							$("#userMatchImage").attr("src", data.picture);
							$("#modal").modal("toggle")
						},
						dataType: "json"
					});	 

		}

		else{
			alert("Please fill out all fields before submitting!");
		}
					
});
 
 </script>

 <style>
	 body{
		font-family: 'Merienda', cursive;
    background-color: rgba(243, 169, 32, 0.3);
    background-image: url("./highfive.jpg");
    background-repeat: no-repeat;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
     background-size: cover;
}
 </style>

 </html>